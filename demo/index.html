<!DOCTYPE html>
<!--
 Copyright 2019 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>EME Encryption Scheme Polyfill Demo</title>

    <!-- Load & install the polyfill. -->
    <script src="../dist/eme-encryption-scheme-polyfill.js"></script>
    <script>
      EncryptionSchemePolyfills.install();
    </script>

    <!-- Load web components used in the demo. -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/elix@^15/define/AutoCompleteComboBox.js"></script>

    <!-- Load the code for the query part of the demo. -->
    <script src="query.js"></script>

    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>EME Encryption Scheme Polyfill Demo</h1>

    <h2>Test query</h2>
    <div class="description">
      Choose parameters like key system, encryption scheme, and media types,
      then click one of the "run" buttons to see the results of the query with
      the polyfill.
    </div>

    <div>
      <label for="keySystem">Key System ID</label>
      <elix-auto-complete-combo-box id="keySystem">
        <div>com.widevine.alpha</div>
        <div>com.microsoft.playready</div>
        <div>com.apple.fps.1_0</div>
      </elix-auto-complete-combo-box>
    </div>

    <div>
      <label for="encryptionScheme">Encryption Scheme</label>
      <elix-auto-complete-combo-box id="encryptionScheme">
        <div>cenc</div>
        <div>cbcs</div>
        <div>cbcs-1-9</div>
      </elix-auto-complete-combo-box>
    </div>

    <div>
      <label for="audio">Audio Type</label>
      <elix-auto-complete-combo-box id="audio">
        <div>audio/mp4; codecs="mp4a.40.2"</div>
        <div>audio/mp4; codecs="opus"</div>
        <div>audio/webm; codecs="vorbis"</div>
        <div>audio/webm; codecs="opus"</div>
      </elix-auto-complete-combo-box>
    </div>

    <div>
      <label for="video">Video Type</label>
      <elix-auto-complete-combo-box id="video">
        <div>video/mp4; codecs="avc1.640028"</div>
        <div>video/mp4; codecs="hev1.1.6.L93.B0"</div>
        <div>video/mp4; codecs="vp09.00.10.08"</div>
        <div>video/mp4; codecs="av01.0.00M.08"</div>
        <div>video/webm; codecs="vp8"</div>
        <div>video/webm; codecs="vp09.00.10.08"</div>
        <div>video/webm; codecs="av01.0.00M.08"</div>
      </elix-auto-complete-combo-box>
    </div>

    <div>
      <button id="emeRun">Run EME query</button>
      <button id="mcRun">Run MC query</button>
    </div>

    <div>
      <label for="results">Results:</label>
      <div id="results"></div>
    </div>

    <div class="divider"></div>


    <h2>Test loading methods</h2>
    <div class="description">
      Here we load the polyfill with each supported loading method using
      iframes.  Each iframe will show the success or failure of the load.  This
      does not test the functionality of the polyfill beyond loading.
    </div>

    <iframe scrolling="no" src="load-tests/load-raw-source-with-script-tag.html"></iframe>
    <iframe scrolling="no" src="load-tests/load-with-script-tag.html"></iframe>
    <iframe scrolling="no" src="load-tests/load-with-requirejs.html"></iframe>
    <iframe scrolling="no" src="load-tests/load-as-es-module.html"></iframe>
  </body>
</html>
